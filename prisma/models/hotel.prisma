model Hotel {
  id          String   @id @default(cuid())
  name        String
  // TODO: Cleanup
  ward        String
  district    String
  province    String
  country     String
  geolocation Unsupported("geography(Point, 4326)")
  rating      Float?    // average rating snapshot, optional
  checkInTime  @db.Time   @map("check_in_time")
  checkOutTime @db.Time   @map("check_out_time")
  breakfastAvailability Boolean @map("breakfast_availability")

  rooms       Room[]
  popularFacilities  Facility[]
  otherFacilities    Facility[]
  favorites   Favorite[]
  recentlyViewed RecentlyViewed[]
  bookings    Booking[]
  reviews     Review[]
  // TODO: add amenities
  // TODO: may have videos
  imageUrls   String[]  // list of image URLs for the hotel

  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  @@map("hotels")
}

model Facility {
  id        String   @id @default(cuid())
  name      String   @unique
  iconUrl   String?  @map("icon_url") // optional icon URL for the facility

  popularInHotels Hotel[]
  otherInHotels   Hotel[]

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@map("facilities")
}

model Room {
  id               String   @id @default(cuid())
  hotelId          String   @map("hotel_id")
  type             String
  adultCapacity    Int      @map("adult_capacity")
  childrenCapacity Int      @map("children_capacity")
  price            Decimal
  hotel            Hotel    @relation(fields: [hotelId], references: [id], onDelete: Cascade)

  bookingRooms     BookingRoom[]
  imageUrls        String[] // list of image URLs for the room
  createdAt        DateTime @default(now())
  updatedAt        DateTime @updatedAt

  @@index([hotelId])
  @@map("rooms")
}

model HotelManager {
  id        String   @id @default(cuid())
  hotelId   String   @map("hotel_id")
  userId    String   @map("user_id")

  hotel     Hotel    @relation(fields: [hotelId], references: [id], onDelete: Restrict)
  user      User     @relation(fields: [userId], references: [id], onDelete: Restrict)

  @@index([hotelId])
  @@index([userId])
  @@map("hotel_manager")
}