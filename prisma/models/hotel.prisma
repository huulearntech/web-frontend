model Hotel {
  id          String   @id @default(cuid())
  name        String
  ownerId     String   @unique @map("owner_id")
  owner       User     @relation(fields: [ownerId], references: [id], onDelete: Cascade)

  wardId      String   @map("ward_id")
  ward        Ward     @relation(fields: [wardId], references: [id], onDelete: Cascade)
  
  geolocation Unsupported("geography(Point, 4326)")
  longitude   Float
  latitude    Float

  description String?
  rating      Float?    // average rating snapshot, optional
  checkInTime  DateTime @db.Time  @map("check_in_time")  // time within a day
  checkOutTime DateTime @db.Time  @map("check_out_time")
  breakfastAvailability Boolean @map("breakfast_availability")
  // TODO: may have videos
  imageUrls   String[]  // list of image URLs for the hotel

  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  rooms            Room[]
  facilities       Facility[]
  favoritedBy      Favorite[]
  recentlyViewedBy RecentlyViewed[]
  bookings         Booking[]

  @@map("hotels")
}

model Facility {
  id        String   @id @default(cuid())
  name      String   @unique
  iconUrl   String?  @map("icon_url") // optional icon URL for the facility

  hotels    Hotel[]
  rooms     Room[]

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@map("facilities")
}

model Room {
  id               String   @id @default(cuid())
  hotelId          String   @map("hotel_id")
  hotel            Hotel    @relation(fields: [hotelId], references: [id], onDelete: Cascade)
  type             String
  adultCapacity    Int      @map("adult_capacity")
  childrenCapacity Int      @map("children_capacity")
  price            Decimal

  imageUrls        String[] // list of image URLs for the room
  bookingRooms     BookingRoom[]
  facilities       Facility[]

  createdAt        DateTime @default(now())
  updatedAt        DateTime @updatedAt

  @@index([hotelId])
  @@map("rooms")
}